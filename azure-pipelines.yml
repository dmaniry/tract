jobs:
  - job: native-linux
    pool:
      vmImage: 'ubuntu-latest'

    strategy:
      matrix:
        rust1_35:
          container: rust:1.35.0
        rust1_32:
          container: rust:1.32.0

    steps:
    - script: cargo build --release --color=always
      displayName: 'Build'

    - script: cargo test --release --all --color=always
      displayName: 'Release tests'

    - script: cargo build --release --benches --color=always
      displayName: 'Build all benches'

  - job: ondemand
    trigger: none
